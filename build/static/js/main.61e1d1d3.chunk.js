(this["webpackJsonpapp-react"]=this["webpackJsonpapp-react"]||[]).push([[0],{81:function(e,t,n){e.exports=n(96)},86:function(e,t,n){},87:function(e,t,n){},88:function(e,t,n){},96:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),o=n(32),c=n.n(o),l=n(75),r=n(36),s=(n(86),n(87),n(88),n(12)),u=n(13),d=n(7),h=n(14),m=n(15),b=n(107),f=n(108),p=n(106),v=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={account:window.cache.auth.account,menu:!1},a.toggleMenu=a.toggleMenu.bind(Object(d.a)(a)),a.hideMenu=a.hideMenu.bind(Object(d.a)(a)),a.logout=a.logout.bind(Object(d.a)(a)),a}return Object(u.a)(n,[{key:"logout",value:function(){window.cache.storage.set("access",null),window.location.href="/"}},{key:"toggleMenu",value:function(){this.setState({menu:!this.state.menu})}},{key:"hideMenu",value:function(){this.setState({menu:!1})}},{key:"render",value:function(){var e=this.state.menu?"show":"";return i.a.createElement(b.a,{bg:"white",expand:"lg"},i.a.createElement(b.a.Collapse,{id:"basic-navbar-nav"},i.a.createElement(f.a,{className:"justify-content-end",style:{width:"100%"}},i.a.createElement("li",{className:"nav-item dropdown"},i.a.createElement("a",{className:"nav-link pr-3 pt-2",href:"dummy",role:"button"},i.a.createElement("i",{className:"fa fa-bell text-lg"}))),i.a.createElement("li",{className:"nav-item dropdown dropdown-user"},i.a.createElement("a",{className:"nav-link",href:"dummy",role:"button",onClick:this.toggleMenu,onBlur:this.hideMenu,"aria-haspopup":"true","aria-expanded":"false"},i.a.createElement("span",{className:"align-middle text-sm d-none d-lg-inline-block"},i.a.createElement("span",{className:"font-weight-bolder"},this.state.account.fullname),i.a.createElement("br",null),void 0!==this.state.account.role&&""!==this.state.account.role&&i.a.createElement("span",{className:"font-weight-light"},this.state.account.role.title))),i.a.createElement("div",{className:"dropdown-menu dropdown-menu-right "+e},void 0!==this.state.account.company&&i.a.createElement(i.a.Fragment,null,i.a.createElement("h6",{className:"dropdown-header"},this.state.account.company.name),i.a.createElement("div",{className:"dropdown-divider"})),i.a.createElement("a",{className:"dropdown-item",href:"dummy"},"Non Bootstrap"),i.a.createElement("div",{className:"dropdown-divider"}),i.a.createElement("a",{className:"dropdown-item",href:"dummy"},"Logout"))),i.a.createElement(p.a,{title:i.a.createElement("span",{className:"align-middle text-sm d-none d-lg-inline-block"},i.a.createElement("span",{className:"font-weight-bolder"},this.state.account.fullname),i.a.createElement("br",null),void 0!==this.state.account.role&&""!==this.state.account.role&&i.a.createElement("span",{className:"font-weight-light"},this.state.account.role.title)),id:"basic-nav-dropdown"},void 0!==this.state.account.company&&i.a.createElement(i.a.Fragment,null,i.a.createElement(p.a.Item,null,this.state.account.company.name),i.a.createElement(p.a.Divider,null)),i.a.createElement(p.a.Item,{href:"#action/3.2"},"Bootstrap"),i.a.createElement(p.a.Divider,null),i.a.createElement(p.a.Item,{onClick:this.logout},"Logout")))))}}]),n}(a.Component),w=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return i.a.createElement("footer",{className:"footer"},i.a.createElement("div",{className:"row align-items-center justify-content-xl-between"},i.a.createElement("div",{className:"col-xl-6"},i.a.createElement("div",{className:"copyright text-center text-xl-left text-muted"},"Copyright \xa9 ",(new Date).getFullYear()," ",i.a.createElement("a",{href:"https://www.slvrcld.com",className:"font-weight-bold ml-1",target:"_blank",rel:"noopener noreferrer"},"SLVRCLD BV"),i.a.createElement("br",null))),i.a.createElement("div",{className:"col-xl-6"},i.a.createElement("ul",{className:"nav nav-footer justify-content-center justify-content-xl-end"}))))}}]),n}(a.Component),g=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={scrollbarFadeEnabled:!1,scrollbarOptions:{wheelSpeed:.32,minScrollbarLength:500,maxScrollbarLength:500,suppressScrollX:!0,height:"80vh"}},a.user=window.cache.auth.account,a.addScrollbarListener=a.addScrollbarListener.bind(Object(d.a)(a)),a.calibrateSizing=a.calibrateSizing.bind(Object(d.a)(a)),a.items=a.items.bind(Object(d.a)(a)),a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.calibrateSizing()}},{key:"addScrollbarListener",value:function(){}},{key:"calibrateSizing",value:function(){}},{key:"items",value:function(){var e=this;return[{type:"label",title:"Overview"},{type:"link",title:"Dashboard",icon:"lni-stats-up",route:"Dashboard"},{type:"label",title:"Workflow"},{type:"group",title:"Claims",icon:"lni-briefcase",condition:function(){return e.user.hasAbilityTo("claim:create")||e.user.hasAbilityTo("claim:view:own")||e.user.hasAbilityTo("claim:view:division")},children:[{title:"View",route:"ClaimView",condition:function(){return"ClaimView"===e.$route.name}},{title:"Request",route:"ClaimProvisionInfo",condition:function(){return e.user.hasAbilityTo("claim:create")}},{title:"List",route:"ClaimsList",condition:function(){return e.user.hasAbilityTo("claim:view:divisions")||e.user.hasAbilityTo("claim:view:own")}}]},{type:"link",title:"Purchase Notes",icon:"lni-ticket-alt",route:"SupplierPurchaseNotes",condition:function(){return"SUPPLIER"===this.user.company.type||this.user.hasAbilityTo("*")}.bind(this)},{type:"link",title:"Dispatch Fees",icon:"lni-delivery",route:"SupplierDispatchQuotes",condition:function(){return this.user.hasAbilityTo("supplier:dispatch:fees")}.bind(this)},{type:"link",title:"Inventory Quotes",icon:"lni-package",route:"SupplierInventoryQuotes",condition:function(){return this.user.hasAbilityTo("supplier:inventory:quotes")}.bind(this)},{type:"label",title:"Support"},{type:"link",icon:"lni-book",title:"Knowledge Base",route:"SupportKnowledgeBase"},{type:"label",title:"Internal",condition:function(){return void 0!==this.user.globalAdmin&&this.user.globalAdmin}.bind(this)},{type:"group",title:"Websocket",icon:"lni-website",condition:function(){return this.user.hasAbilityTo("*")}.bind(this),children:[{title:"Connections",route:"WebsocketConnections"}]},{type:"link",title:"Switch Role",icon:"fa fa-shield",condition:function(){return void 0!==this.user.globalAdmin&&this.user.globalAdmin}.bind(this),action:function(){}}]}},{key:"render",value:function(){return i.a.createElement(b.a,{className:"sidebar navbar-vertical fixed-left navbar-expand-md navbar-light py-sm-3",id:"sidenav-main","data-v-step":"sidebar"},i.a.createElement(b.a.Toggle,{"aria-controls":"sidenav-main","aria-expanded":"false","aria-label":"Toggle navigation"},i.a.createElement("i",{className:"fa fa-bars text-dark text-lg"})),i.a.createElement(b.a.Brand,{href:"#home"},i.a.createElement("img",{src:"https://slvrcld-assets.s3.eu-west-1.amazonaws.com/logo-white.svg",height:"100",alt:"Logo"})),i.a.createElement(b.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),i.a.createElement(b.a.Collapse,{id:"responsive-navbar-nav1"},i.a.createElement(f.a,{className:"mr-auto"},i.a.createElement(b.a.Text,{className:"navbar-heading text-muted"},"Workflow"),i.a.createElement(f.a.Link,{href:"#purchase_notes"},i.a.createElement("i",{className:"fa fa-clipboard"}),"Purchase Notes"),i.a.createElement(f.a.Link,{href:"#fees"},i.a.createElement("i",{className:"fa fa-truck"}),"Dispatch Fees"))))}}]),n}(a.Component),E=n(104),y=n(105),k=n(71),j=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e,a){var o;return Object(s.a)(this,n),(o=t.call(this,e,a)).errorZone=i.a.createRef(),o.handleShow=o.handleShow.bind(Object(d.a)(o)),o.handleClose=o.handleClose.bind(Object(d.a)(o)),o.handleSubmit=o.handleSubmit.bind(Object(d.a)(o)),o.handleExit=o.handleExit.bind(Object(d.a)(o)),o.handleEmailChange=o.handleEmailChange.bind(Object(d.a)(o)),o.handlePasswordChange=o.handlePasswordChange.bind(Object(d.a)(o)),o.testAuthenticationToken=o.testAuthenticationToken.bind(Object(d.a)(o)),o.loginSucceeded=o.loginSucceeded.bind(Object(d.a)(o)),o.loginFailed=o.loginFailed.bind(Object(d.a)(o)),o.handlePasswordChange=o.handlePasswordChange.bind(Object(d.a)(o)),o.validateForm=o.validateForm.bind(Object(d.a)(o)),o.state={show:!1,email:"",password:""},o}return Object(u.a)(n,[{key:"handleEmailChange",value:function(e){this.setState({email:e.target.value})}},{key:"handlePasswordChange",value:function(e){this.setState({password:e.target.value})}},{key:"handleSubmit",value:function(){var e=this;this.errorZone.current.innerHTML="&nbsp;",this.validateForm()&&window.cache.WebApi.tokens().create({email:this.state.email,password:this.state.password,name:"Frontend Session",grant:"password"}).then((function(t){console.log("handleSubmit response",t),window.cache.auth.access=t.data,window.cache.storage.set("access",window.cache.auth.access),e.testAuthenticationToken(!1)})).catch((function(t){e.errorZone.current.innerHTML=t}))}},{key:"testAuthenticationToken",value:function(e){var t=this;window.cache.WebApi.accounts().find().then((function(e){console.log("testAuthenticationToken",e),window.cache.auth.account=e.data,window.cache.auth.validated=!0,t.loginSucceeded(e)})).catch((function(n){e||t.loginFailed(n)})).finally((function(e){}))}},{key:"loginSucceeded",value:function(e){this.errorZone.current.innerHTML="&nbsp;",window.cache.storage.set("account",window.cache.auth.account),window.location.href="/"}},{key:"loginFailed",value:function(e){window.cache.auth.access=!1,window.cache.auth.validated=!1,window.cache.storage.remove("access"),this.errorZone.current.innerHTML=e}},{key:"validateForm",value:function(){return""!==this.state.email&&""!==this.state.password}},{key:"handleClose",value:function(){this.setState({show:!1})}},{key:"handleShow",value:function(){this.setState({show:!0})}},{key:"handleExit",value:function(){this.handleClose()}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(E.a,{show:this.state.show,onHide:this.handleClose,backdrop:"static"},i.a.createElement(E.a.Header,null,i.a.createElement(E.a.Title,null,"Login")),i.a.createElement(E.a.Body,null,i.a.createElement("h4",null,"Please login to continue"),i.a.createElement("form",{onSubmit:this.handleSubmit},i.a.createElement(y.a.Group,{controlId:"email"},i.a.createElement(y.a.Label,null,"Email"),i.a.createElement(y.a.Control,{onChange:this.handleEmailChange,autoFocus:!0})),i.a.createElement(y.a.Group,{controlId:"password"},i.a.createElement(y.a.Label,null,"Password"),i.a.createElement(y.a.Control,{type:"password",onChange:this.handlePasswordChange}))),i.a.createElement("div",{ref:this.errorZone},"\xa0"),i.a.createElement("hr",null)),i.a.createElement(E.a.Footer,null,i.a.createElement(k.a,{onClick:this.handleExit},"Exit"),i.a.createElement(k.a,{onClick:this.handleSubmit,disabled:!this.validateForm(),bsstyle:"info"},"Login"))))}}]),n}(i.a.Component),C=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e,a){var i;return Object(s.a)(this,n),(i=t.call(this,e,a)).handleShow=i.handleShow.bind(Object(d.a)(i)),i.handleClose=i.handleClose.bind(Object(d.a)(i)),i.handleSubmit=i.handleSubmit.bind(Object(d.a)(i)),i.handleExit=i.handleExit.bind(Object(d.a)(i)),i.state={show:!1,username:"",password:""},i}return Object(u.a)(n,[{key:"handleSubmit",value:function(){this.refs.errorZone.innerHTML="&nbsp;"}},{key:"handleClose",value:function(){this.setState({show:!1})}},{key:"handleShow",value:function(){this.setState({show:!0})}},{key:"handleExit",value:function(){this.handleClose()}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(E.a,{show:this.state.show,onHide:this.handleClose},i.a.createElement(E.a.Header,{closeButton:!0},i.a.createElement(E.a.Title,null,"User inactivity detected")),i.a.createElement(E.a.Body,null,i.a.createElement("h4",null,"You have been inactive for some time"),i.a.createElement("div",{ref:"errorZone"},"\xa0"),i.a.createElement("hr",null)),i.a.createElement(E.a.Footer,null,i.a.createElement(k.a,{onClick:this.handleExit},"Exit"),i.a.createElement(k.a,{onClick:this.handleSubmit,bsStyle:"info"},"Remain logged in"))))}}]),n}(i.a.Component),O=n(102),S=n(103),N=n(73);a.Component;var x=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).loginModal=i.a.createRef(),a.inactivityModal=i.a.createRef(),a.componentDidMount=a.componentDidMount.bind(Object(d.a)(a)),a.handleNotificationClick=a.handleNotificationClick.bind(Object(d.a)(a)),a.state={_notificationSystem:null},a}return Object(u.a)(n,[{key:"handleNotificationClick",value:function(e){}},{key:"componentDidMount",value:function(){(function(){var e=window.cache.storage.get("access");return console.log("sessionLoggedIn access",e),void 0!==e.id})()||this.loginModal.current.handleShow()}},{key:"componentDidUpdate",value:function(e){window.innerWidth<993&&e.history.location.pathname!==e.location.pathname&&-1!==document.documentElement.className.indexOf("nav-open")&&document.documentElement.classList.toggle("nav-open")}},{key:"isAuthenticated",value:function(){return!0}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(g,null),i.a.createElement("div",{className:"content"},i.a.createElement(v,this.props),i.a.createElement(j,{ref:this.loginModal}),i.a.createElement(C,{ref:this.inactivityModal}),i.a.createElement("div",{className:"container-fluid"},i.a.createElement("slot",null),i.a.createElement(w,this.props))))}}]),n}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var L=n(79),T=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={},a}return Object(u.a)(n,[{key:"buildQueryParams",value:function(e){var t=[];if(e)for(var n in e)e.hasOwnProperty(n)&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return"?"+t.join("&")}},{key:"buildHeaders",value:function(e){var t={Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"};return console.log("buildHeaders window.cache.auth.access",window.cache.auth.access),window.cache.auth.access&&window.cache.auth.access.token&&(t.Authorization="Bearer ".concat(window.cache.auth.access.token)),t}},{key:"request",value:function(e,t,n,a,i){t+=this.buildQueryParams(n);var o={method:e,headers:this.buildHeaders()};return"post"!==e&&"put"!==e||(o.body=JSON.stringify(a)),new Promise((function(e,n){fetch("https://api-sandbox.slvrcld.com/v1"+t,o).then((function(t){t.json().then((function(t){return"success"===t.meta.status?e(t):n(t.meta.message)})).catch((function(e){return n(e)}))}))}))}},{key:"accounts",value:function(e,t){var n=this;return{avatars:function(){return{create:function(a,i){return new Promise((function(o,c){n.signedUploads().upload(a,i).then((function(a){n.request("post","/accounts/".concat(e,"/avatars"),t,a.data.data).then((function(e){return o(e)})).catch((function(e){return c(e)}))}))}))}}},create:function(e){return n.request("post","/accounts",t,e)},find:function(){return n.request("get","/accounts",Object(L.a)({},t,{},{include_branding:1}))},notifications:function(t,a){return{get:function(t){return n.request("get","/accounts/".concat(e,"/notifications"),t)},destroy:function(a){return n.request("delete","/accounts/".concat(e,"/notifications/").concat(t),a)},update:function(a,i){return n.request("put","/accounts/".concat(e,"/notifications/").concat(t),i,a)}}},update:function(a){return n.request("post","/accounts/".concat(e),t,a)},subscriptions:function(t){return{update:function(a){return n.request("post","/accounts/".concat(e,"/subscriptions"),t,a)},get:function(t){return n.request("get","/accounts/".concat(e,"/subscriptions"),t)}}}}}},{key:"tokens",value:function(e,t){var n=this;return{create:function(e){return n.request("post","/tokens",t,e)},destroy:function(){return n.request("delete","/tokens/".concat(e),t)},get:function(e){return n.request("get","/tokens",e)},update:function(a){return n.request("patch","/tokens/".concat(e),t)}}}}]),n}(a.Component),A=n(74),M=new(n.n(A).a)({encodingType:"aes"}),F={WebApi:null,WebApiExceptionHandler:null,Websocket:null,WebsocketListener:null,TokenLifeManager:null,Tour:null,branding:{default:{},company:{}},storage:M,auth:{validated:!1,access:M.get("access"),account:M.get("account"),notifications:null,notificationsMeta:{}},config:{LoaderEnabled:!1,ConfettiEnabled:!1,AchievementsEnabled:!1,TranslatorEnabled:!0,WebSocketsEnabled:!1,NotificationsEnabled:!1},transitions:{duration:{enter:300,leave:300},enterClass:"animated fadeIn",leaveClass:"animated fadeOut"},page:{title:!1,icon:!1,loading:!1,fullpage:!1},references:{Loader:null}};F.WebApi=new T,window.cache=F,c.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(l.a,null,i.a.createElement(r.c,null,i.a.createElement(r.a,{path:"/",name:"Home",component:x})))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[81,1,2]]]);
//# sourceMappingURL=main.61e1d1d3.chunk.js.map